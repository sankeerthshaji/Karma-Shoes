<%- include('../partials/userPartials/userHeader') %>

<!-- Start Banner Area -->
<section class="banner-area organic-breadcrumb">
  <div class="container">
    <div
      class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end"
    >
      <div class="col-first">
        <h1>My Profile</h1>
        <nav class="d-flex align-items-center">
          <a href="/">Home<span class="lnr lnr-arrow-right"></span></a>
          <a href="/userProfile">My Profile</a>
        </nav>
      </div>
    </div>
  </div>
</section>
<!-- End Banner Area -->

<div class="container rounded bg-white mt-5 mb-5">
  <div class="row">
    <div class="col-md-3 border-right">
      <div class="d-flex flex-column align-items-center text-center p-3 py-5">
        <% if(userDetails[0].image.length!==0) { %> 
        <img
          class="rounded-circle mt-5"
          width="150px"
          src="<%=userDetails[0].image[0].url%>"
          onerror="this.src='https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg';"
        />
        <% }else{%> 
          <img
          class="rounded-circle mt-5"
          width="150px"
          src="https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg"
          onerror="this.src='https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg';"
        />
        <% } %> 
        <span class="font-weight-bold"><%=userDetails[0].username%></span
        ><span class="text-black-50"><%=userDetails[0].email%></span>
        <a href="/add-image"
          ><button type="button" class="btn btn-outline-primary">
            <img src="/img/add-image.svg" />Add Image
          </button></a
        >
      </div>
    </div>
    <div class="col-md-5 border-right">
      <div class="p-3 py-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4 class="text-right">Addresses</h4>
        </div>

        <div class="row mt-3">
          <% if(addresses != "") { %>
          <div class="container pl-4 pt-4" style="border: 1px solid #cecece">
            <% addresses.forEach((address,index)=>{ %>
            <div class="address pb-5">
              <div class="row pt-4">
                <h5>Address <%= index+1 %></h5>
                <!-- Need to add theme, buttons -->
                <div class="col-xs-12">
                  <%= address?.houseName %><br />
                  <%= address?.area %><br />
                  <%= address?.landmark %><br />
                  <%= address?.city %><br />
                  <%= address?.state %><br />
                  <%= address?.country %><br />
                  <%= address?.pincode %><br />
                </div>
              </div>
              <div class="row pt-2">
                <!-- Need to add theme, buttons -->
                <div class="col-xs-12" style="width: 4rem; height: auto">
                  <a href="/editAddress/<%= address._id %>"
                    ><button class="btn btn-info">Edit</button></a
                  >
                </div>
                <div class="col-xs-12" style="width: 6rem; height: auto">
                  <form
                    action="/userProfile/<%= address._id %>?_method=DELETE"
                    method="POST"
                  >
                    <button class="btn btn-danger">Delete</button>
                  </form>
                </div>
              </div>
            </div>
            <% }) %>
          </div>
          <% } else { %>
          <h3>There are no addresses!!</h3>
          <% } %>
          <div class="mt-3">
            <a href="/addAddress"
              ><button class="btn btn-primary profile-button" type="button">
                Add Address
              </button></a
            >
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div>
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h4 class="text-right">Profile Settings</h4>
        </div>
        <div class="col-md-12">
          <label class="labels">User Name</label
          ><input
            type="text"
            class="form-control"
            value="<%=userDetails[0].username%>"
            readonly
          />
        </div>
        <div class="col-md-12">
          <label class="labels">Mobile Number</label
          ><input
            type="text"
            class="form-control"
            value="<%=userDetails[0].mobile%>"
            readonly
          />
        </div>
      </div>
      <div class="p-3 py-5">
        <div class="d-flex justify-content-between align-items-center experience"><span>Password</span><span class="px-3 p-1 add-experience">
          <a href="/changePassword"><button class="btn btn-primary profile-button" type="button">Change Password</button></a></span></div><br>
    </div>
    </div>
  </div>
</div>

<%- include('../partials/userPartials/userFooter') %>
